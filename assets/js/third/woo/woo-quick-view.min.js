var $j=jQuery.noConflict();$j(document).ready((function(){if("undefined"==typeof oceanwpLocalize)return!1;var e=$j("#owp-qv-wrap"),t=$j("#owp-qv-content");$j(document).on("click",".owp-quick-view",(function(a){a.preventDefault();var n=$j(this),r=$j(this).data("product_id");n.parent().addClass("loading"),$j.ajax({url:oceanwpLocalize.ajax_url,data:{action:"oceanwp_product_quick_view",product_id:r},success:function(a){var n=$j("html").innerWidth();$j("html").css("overflow","hidden");var r=$j("html").innerWidth();$j("html").css("margin-right",r-n),$j("html").addClass("owp-qv-open"),t.html(a),e.fadeIn(),e.addClass("is-visible");var o=t.find(".variations_form");o.trigger("check_variations"),o.trigger("reset_image");var i=t.find(".variations_form");i.length>0&&(i.wc_variation_form(),i.find("select").change());var c=t.find(".owp-qv-image");c.find("li").length>1&&c.flexslider();var d=t.find("form.grouped_form");if(d){var l=t.find("form.grouped_form").attr("action");d.find(".group_table, button.single_add_to_cart_button").hide(),d.append(' <a href="'+l+'" class="button">'+oceanwpLocalize.grouped_text+"</a>")}}}).done((function(){n.parent().removeClass("loading")}))}));var a=function(){$j("html").css({overflow:"","margin-right":""}),$j("html").removeClass("owp-qv-open"),e.fadeOut(),e.removeClass("is-visible"),setTimeout((function(){t.html("")}),600)};$j(".owp-qv-overlay, .owp-qv-close").on("click",(function(e){e.preventDefault(),a()})),$j(document).keyup((function(e){27==e.keyCode&&a()})),$j.fn.serializeArrayAll=function(){var e=/\r?\n/g;return this.map((function(){return this.elements?jQuery.makeArray(this.elements):this})).map((function(t,a){var n=jQuery(this).val();return null==n?null==n:"checkbox"==this.type&&0==this.checked||"radio"==this.type&&0==this.checked?{name:this.name,value:this.checked?this.value:""}:jQuery.isArray(n)?jQuery.map(n,(function(t,n){return{name:a.name,value:t.replace(e,"\r\n")}})):{name:a.name,value:n.replace(e,"\r\n")}})).get()};var n=function(){$j(document.body).on("click","#owp-qv-content .product:not(.product-type-external) .single_add_to_cart_button",this.onAddToCart).on("added_to_cart",this.updateButton)};n.prototype.onAddToCart=function(e){e.preventDefault();var t=$j(this),a=$j(this).closest("form.cart").serializeArrayAll(),n=!1;$j.each(a,(function(e,t){if("add-to-cart"===t.name)return n=!0,!1})),n&&(e.preventDefault(),$j(document.body).trigger("adding_to_cart",[t,a]),t.removeClass("added"),t.addClass("loading"),$j.ajax({url:oceanwpLocalize.wc_ajax_url,type:"POST",data:a,success:function(e){$j(document.body).trigger("wc_fragment_refresh"),$j(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,t]),"yes"!==oceanwpLocalize.cart_redirect_after_add||(window.location=oceanwpLocalize.cart_url)}}))},n.prototype.updateButton=function(e,t,a,n){(n=void 0!==n&&n)&&(n.removeClass("loading"),n.addClass("added"),oceanwpLocalize.is_cart||0!==n.parent().find(".added_to_cart").length||n.after(' <a href="'+oceanwpLocalize.cart_url+'" class="added_to_cart wc-forward" title="'+oceanwpLocalize.view_cart+'">'+oceanwpLocalize.view_cart+"</a>"))},new n}));